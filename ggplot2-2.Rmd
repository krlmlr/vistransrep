---
title: "ggplot2 exercises part 2"
author: "Kirill MÃ¼ller"
date: "October 18, 2017"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
```

## Reverse-engineering, theory

How could the authors of the [2016 WHO TB report](http://www.who.int/tb/publications/global_report/en/) have created the following plots? Assume that each plot is based on one or several suitably crafted dataset(s) that have been transformed in advance to support this particular plot. Answer the following questions for each plot:

1. What layers (geoms) are used?
1. Which variables are mapped to which aesthetics?
1. Can you identify manual aesthetics (i.e., aesthetics that are unchanged for all observations?)
1. What statistical transformations, if any, have been applied?
1. What positional adjustments, if any, have been applied?
1. If an image contains more than one plot, explain the mechanism.
1. What does each observation in the plotting dataset represent?
1. Do you notice details about the plot which you can't explain yet?


### Plot 1

![Plot 1](ggplots/01.png)

### Plot 2

![Plot 2](ggplots/02.png)

### Plot 3

![Plot 3](ggplots/03.png)

### Plot 4

![Plot 4](ggplots/04.png)

### Plot 5

![Plot 5](ggplots/05.png)

### Plot 6

![Plot 6](ggplots/06.png)

### Plot 7

![Plot 7](ggplots/07.png)

### Plot 8

![Plot 8](ggplots/08.png)

### Plot 9

![Plot 9](ggplots/09.png)

### Plot 10

![Plot 10](ggplots/10.png)

### Plot 11

![Plot 11](ggplots/11.png)

### Plot 12

![Plot 12](ggplots/12.png)

### Plot 13

![Plot 13](ggplots/13.png)

### Plot 14

![Plot 14](ggplots/14.png)

### Plot 15

![Plot 15](ggplots/15.png)

### Plot 16

![Plot 16](ggplots/16.png)

### Plot 17

![Plot 17](ggplots/17.png)

### Plot 18

![Plot 18](ggplots/18.png)

### Plot 19

![Plot 19](ggplots/19.png)

### Plot 20

![Plot 20](ggplots/20.png)

### Plot 21

![Plot 21](ggplots/21.png)

## [Reverse-engineering, practice](reverse.html)

Recreate the following plots by filling in the dots in the corresponding code snippets. Use the `high_impact_stats` dataset from the `gfdata` package. What is the purpose of the predefined `scale_...()` and `theme()` calls?

### Plot 1

```r
library(gfdata)
ggplot(
  data = ...,
  mapping = aes(
    x = ordered(...),
    y = ...
  )
) +
  geom_...() +
  scale_y_continuous(labels = scales::percent, limits = c(0, NA)) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1, vjust = 0.5))
```

```{r echo = FALSE}
library(gfdata)
ggplot(
  data = high_impact_stats,
  mapping = aes(
    x = ordered(year),
    y = tb_treatment_coverage_percent
  )
) +
  geom_boxplot() +
  scale_y_continuous(labels = scales::percent, limits = c(0, NA)) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1, vjust = 0.5))
```


```r
library(gfdata)
ggplot(...) +
  geom_...(
    ...,
    fill = "grey"
  ) +
  geom_line(
    ...,
    color = "green"
  ) +
  facet_wrap(~..., scales = ..., ncol = 3) +
  scale_y_continuous(limits = c(0, NA))
```

```{r echo = FALSE, fig.height=8}
library(gfdata)
ggplot(data = high_impact_stats, aes(x = year)) +
  geom_ribbon(
    mapping = aes(
      ymin = people_living_with_hiv_aids_lower_number,
      ymax = people_living_with_hiv_aids_higher_number
    ),
    fill = "grey"
  ) +
  geom_line(
    mapping = aes(y = people_living_with_hiv_aids_number),
    color = "green"
  ) +
  facet_wrap(~country, scales = "free_y", ncol = 3) +
  scale_y_continuous(limits = c(0, NA))
```
