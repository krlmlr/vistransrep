```{r 22-remove-all, include = FALSE}
rm(list = ls())
```


## Filtering: `dplyr::filter()`

<details><summary>*Click here to show setup code.*</summary>
```{r include = FALSE}
### Filtering: `dplyr::filter()`

```
```{r 22-setup-22-filter-r}
library(tidyverse)
library(nycflights13)

library(conflicted)
conflict_prefer("filter", "dplyr")
```
</details>

During this lecture we will be working with data from the package {nycflights13}, which contains flights in the year 2013 with their departure in New York City (airports: JFK, LGA or EWR) to destinations in the United States, Puerto Rico, and the American Virgin Islands.

```{r include = FALSE}
# example data
```
```{r 22-example-data}
flights
?flights
```

```{r 22-example-data-help, eval = FALSE}
?flights
```

The function `dplyr::filter()` helps you to reduce your dataset to the observations (rows) of interest.
The filter condition can use any of the dataset's variables and needs to be a logical expression.

```{r include = FALSE}
# all filters are logical: numeric comparison
```
```{r 22-all-filters-are-logical-numeric-comparison}
flights %>%
  filter(dep_time < 600)
```

If you use one or more variables of the dataset in the filter condition, a vectorized evaluation of the condition is taking place.
Generally you can provide any logical vector with a length equal to the number of rows (or alternatively equal to 1, if you want to keep/drop all rows).

```{r include = FALSE}
# filter: logical result from function
```
```{r 22-filter-logical-result-from-function}
flights %>%
  filter(is.na(dep_time))
```

Use `&` or multiple filters to return only rows that match both criteria:

```{r include = FALSE}
# one AND the other
```
```{r 22-one-and-the-other}
flights %>%
  filter(dep_time < 600 & arr_time > 2200)

flights %>%
  filter(dep_time >= 700 & arr_time < 800)

flights %>%
  filter(dep_time >= 700) %>%
  filter(arr_time < 800)
```

Use `|` to return all rows that match either criterion or both:

```{r include = FALSE}
# one OR the other
```
```{r 22-one-or-the-other}
flights %>%
  filter(dep_time < 600 | arr_time > 2200)
```
