<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 {ggplot2} basics | Visualization, transformation and reporting with the tidyverse</title>
  <meta name="description" content="2 {ggplot2} basics | Visualization, transformation and reporting with the tidyverse" />
  <meta name="generator" content="bookdown 0.16 and GitBook 2.6.7" />

  <meta property="og:title" content="2 {ggplot2} basics | Visualization, transformation and reporting with the tidyverse" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 {ggplot2} basics | Visualization, transformation and reporting with the tidyverse" />
  
  
  

<meta name="author" content="Kirill Müller, Tobias Schieferdecker, Patrick Schratz" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="r-and-rstudio.html"/>
<link rel="next" href="vis-adv.html"/>
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<script src="libs/d3/d3.min.js"></script>
<script src="libs/d3-lasso/d3-lasso.min.js"></script>
<link href="libs/ggiraphjs/styles.css" rel="stylesheet" />
<script src="libs/ggiraphjs/ggiraphjs.min.js"></script>
<script src="libs/girafe-binding/girafe.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="scroll.css" type="text/css" />
<link rel="stylesheet" href="extra.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">vistransrep</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#links"><i class="fa fa-check"></i>Links</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#package-versions-used"><i class="fa fa-check"></i>Package versions used</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#speakers"><i class="fa fa-check"></i>Speakers</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i>Introduction</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html"><i class="fa fa-check"></i><b>1</b> R and RStudio</a><ul>
<li class="chapter" data-level="1.1" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#r-as-a-toolkit"><i class="fa fa-check"></i><b>1.1</b> R as a toolkit</a><ul>
<li class="chapter" data-level="1.1.1" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#why-r-and-rstudio"><i class="fa fa-check"></i><b>1.1.1</b> Why R and RStudio?</a></li>
<li class="chapter" data-level="1.1.2" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#some-r-basics"><i class="fa fa-check"></i><b>1.1.2</b> Some R basics</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#r-code-examples"><i class="fa fa-check"></i><b>1.2</b> R code examples</a><ul>
<li class="chapter" data-level="1.2.1" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#linear-regression"><i class="fa fa-check"></i><b>1.2.1</b> Linear regression</a></li>
<li class="chapter" data-level="1.2.2" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#base-r-plot"><i class="fa fa-check"></i><b>1.2.2</b> Base R plot</a></li>
<li class="chapter" data-level="1.2.3" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#ggplot2"><i class="fa fa-check"></i><b>1.2.3</b> ggplot2</a></li>
<li class="chapter" data-level="1.2.4" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#gganimate"><i class="fa fa-check"></i><b>1.2.4</b> gganimate</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#r-vs.rstudio"><i class="fa fa-check"></i><b>1.3</b> R vs. RStudio</a></li>
<li class="chapter" data-level="1.4" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#r-vs.r-packages"><i class="fa fa-check"></i><b>1.4</b> R vs. R packages</a></li>
<li class="chapter" data-level="1.5" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#r-packages"><i class="fa fa-check"></i><b>1.5</b> R packages</a></li>
<li class="chapter" data-level="1.6" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#rprofile"><i class="fa fa-check"></i><b>1.6</b> .Rprofile</a></li>
<li class="chapter" data-level="1.7" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#renviron"><i class="fa fa-check"></i><b>1.7</b> .Renviron</a></li>
<li class="chapter" data-level="1.8" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#rstudio"><i class="fa fa-check"></i><b>1.8</b> RStudio</a></li>
<li class="chapter" data-level="1.9" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#rstudio-addins"><i class="fa fa-check"></i><b>1.9</b> RStudio Addins</a></li>
<li class="chapter" data-level="1.10" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#rstudio-projects"><i class="fa fa-check"></i><b>1.10</b> RStudio projects</a></li>
<li class="chapter" data-level="1.11" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#alternatives-to-rstudio"><i class="fa fa-check"></i><b>1.11</b> Alternatives to RStudio</a></li>
</ul></li>
<li class="part"><span><b>I Visualization</b></span></li>
<li class="chapter" data-level="2" data-path="vis-basics.html"><a href="vis-basics.html"><i class="fa fa-check"></i><b>2</b> {ggplot2} basics</a><ul>
<li class="chapter" data-level="2.1" data-path="vis-basics.html"><a href="vis-basics.html#basics-for-visualisation-in-r-using-ggplot2"><i class="fa fa-check"></i><b>2.1</b> Basics for visualisation in R using {ggplot2}</a><ul>
<li class="chapter" data-level="2.1.1" data-path="vis-basics.html"><a href="vis-basics.html#creating-the-plot-skeleton-ggplot"><i class="fa fa-check"></i><b>2.1.1</b> Creating the plot skeleton: <code>ggplot()</code></a></li>
<li class="chapter" data-level="2.1.2" data-path="vis-basics.html"><a href="vis-basics.html#what-is-a-statistical-graphic"><i class="fa fa-check"></i><b>2.1.2</b> What is a “statistical graphic”?</a></li>
<li class="chapter" data-level="2.1.3" data-path="vis-basics.html"><a href="vis-basics.html#terminology"><i class="fa fa-check"></i><b>2.1.3</b> Terminology</a></li>
<li class="chapter" data-level="2.1.4" data-path="vis-basics.html"><a href="vis-basics.html#the-grammar-of-graphics"><i class="fa fa-check"></i><b>2.1.4</b> The Grammar of graphics …</a></li>
<li class="chapter" data-level="2.1.5" data-path="vis-basics.html"><a href="vis-basics.html#about-ggplot2"><i class="fa fa-check"></i><b>2.1.5</b> About {ggplot2}</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="vis-basics.html"><a href="vis-basics.html#geom_-functions"><i class="fa fa-check"></i><b>2.2</b> <code>geom_*</code> functions</a><ul>
<li class="chapter" data-level="2.2.1" data-path="vis-basics.html"><a href="vis-basics.html#arguments"><i class="fa fa-check"></i><b>2.2.1</b> Arguments</a></li>
<li class="chapter" data-level="2.2.2" data-path="vis-basics.html"><a href="vis-basics.html#combining-geoms"><i class="fa fa-check"></i><b>2.2.2</b> Combining geoms</a></li>
<li class="chapter" data-level="2.2.3" data-path="vis-basics.html"><a href="vis-basics.html#summary"><i class="fa fa-check"></i><b>2.2.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="vis-basics.html"><a href="vis-basics.html#two-variable-plots"><i class="fa fa-check"></i><b>2.3</b> Two variable plots</a><ul>
<li class="chapter" data-level="2.3.1" data-path="vis-basics.html"><a href="vis-basics.html#continuous-x-and-y"><i class="fa fa-check"></i><b>2.3.1</b> Continuous X and Y</a></li>
<li class="chapter" data-level="2.3.2" data-path="vis-basics.html"><a href="vis-basics.html#discrete-x-and-continuous-y"><i class="fa fa-check"></i><b>2.3.2</b> Discrete X and continuous Y</a></li>
<li class="chapter" data-level="2.3.3" data-path="vis-basics.html"><a href="vis-basics.html#discrete-x-and-y"><i class="fa fa-check"></i><b>2.3.3</b> Discrete X and Y</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="vis-basics.html"><a href="vis-basics.html#one-variable-plots"><i class="fa fa-check"></i><b>2.4</b> One variable plots</a><ul>
<li class="chapter" data-level="2.4.1" data-path="vis-basics.html"><a href="vis-basics.html#continuous-variables"><i class="fa fa-check"></i><b>2.4.1</b> Continuous variables</a></li>
<li class="chapter" data-level="2.4.2" data-path="vis-basics.html"><a href="vis-basics.html#discrete-variables"><i class="fa fa-check"></i><b>2.4.2</b> Discrete variables</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="vis-basics.html"><a href="vis-basics.html#exercises"><i class="fa fa-check"></i><b>2.5</b> Exercises</a></li>
<li class="chapter" data-level="2.6" data-path="vis-basics.html"><a href="vis-basics.html#colors-and-shape"><i class="fa fa-check"></i><b>2.6</b> Colors and shape</a><ul>
<li class="chapter" data-level="2.6.1" data-path="vis-basics.html"><a href="vis-basics.html#static-colors"><i class="fa fa-check"></i><b>2.6.1</b> Static colors</a></li>
<li class="chapter" data-level="2.6.2" data-path="vis-basics.html"><a href="vis-basics.html#dynamic-colors"><i class="fa fa-check"></i><b>2.6.2</b> Dynamic colors</a></li>
<li class="chapter" data-level="2.6.3" data-path="vis-basics.html"><a href="vis-basics.html#shape"><i class="fa fa-check"></i><b>2.6.3</b> Shape</a></li>
<li class="chapter" data-level="2.6.4" data-path="vis-basics.html"><a href="vis-basics.html#combining-color-and-shape"><i class="fa fa-check"></i><b>2.6.4</b> Combining color and shape</a></li>
<li class="chapter" data-level="2.6.5" data-path="vis-basics.html"><a href="vis-basics.html#transparency"><i class="fa fa-check"></i><b>2.6.5</b> Transparency</a></li>
<li class="chapter" data-level="2.6.6" data-path="vis-basics.html"><a href="vis-basics.html#what-can-go-wrong"><i class="fa fa-check"></i><b>2.6.6</b> What can go wrong</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="vis-basics.html"><a href="vis-basics.html#labels"><i class="fa fa-check"></i><b>2.7</b> Labels</a></li>
<li class="chapter" data-level="2.8" data-path="vis-basics.html"><a href="vis-basics.html#themes"><i class="fa fa-check"></i><b>2.8</b> Themes</a></li>
<li class="chapter" data-level="2.9" data-path="vis-basics.html"><a href="vis-basics.html#scales"><i class="fa fa-check"></i><b>2.9</b> Scales</a><ul>
<li class="chapter" data-level="2.9.1" data-path="vis-basics.html"><a href="vis-basics.html#labs"><i class="fa fa-check"></i><b>2.9.1</b> <code>labs()</code></a></li>
<li class="chapter" data-level="2.9.2" data-path="vis-basics.html"><a href="vis-basics.html#axes"><i class="fa fa-check"></i><b>2.9.2</b> Axes</a></li>
<li class="chapter" data-level="2.9.3" data-path="vis-basics.html"><a href="vis-basics.html#color-scale"><i class="fa fa-check"></i><b>2.9.3</b> Color scale</a></li>
</ul></li>
<li class="chapter" data-level="2.10" data-path="vis-basics.html"><a href="vis-basics.html#export-saving"><i class="fa fa-check"></i><b>2.10</b> Export &amp; saving</a><ul>
<li class="chapter" data-level="2.10.1" data-path="vis-basics.html"><a href="vis-basics.html#base-r-vs.-ggplot2"><i class="fa fa-check"></i><b>2.10.1</b> Base R vs. {{ggplot2}}</a></li>
<li class="chapter" data-level="2.10.2" data-path="vis-basics.html"><a href="vis-basics.html#storing-the-plot-as-an-r-object"><i class="fa fa-check"></i><b>2.10.2</b> Storing the plot as an R object</a></li>
<li class="chapter" data-level="2.10.3" data-path="vis-basics.html"><a href="vis-basics.html#best-practices-for-exporting"><i class="fa fa-check"></i><b>2.10.3</b> Best practices for exporting</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="vis-adv.html"><a href="vis-adv.html"><i class="fa fa-check"></i><b>3</b> {ggplot2} advanced</a><ul>
<li class="chapter" data-level="3.1" data-path="vis-adv.html"><a href="vis-adv.html#facetting"><i class="fa fa-check"></i><b>3.1</b> Facetting</a><ul>
<li class="chapter" data-level="3.1.1" data-path="vis-adv.html"><a href="vis-adv.html#facet_wrap"><i class="fa fa-check"></i><b>3.1.1</b> <code>facet_wrap()</code></a></li>
<li class="chapter" data-level="3.1.2" data-path="vis-adv.html"><a href="vis-adv.html#facet_grid"><i class="fa fa-check"></i><b>3.1.2</b> <code>facet_grid()</code></a></li>
<li class="chapter" data-level="3.1.3" data-path="vis-adv.html"><a href="vis-adv.html#scales-1"><i class="fa fa-check"></i><b>3.1.3</b> Scales</a></li>
<li class="chapter" data-level="3.1.4" data-path="vis-adv.html"><a href="vis-adv.html#renaming-of-facet-labels"><i class="fa fa-check"></i><b>3.1.4</b> Renaming of facet labels</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="vis-adv.html"><a href="vis-adv.html#extensions"><i class="fa fa-check"></i><b>3.2</b> Extensions</a><ul>
<li class="chapter" data-level="3.2.1" data-path="vis-adv.html"><a href="vis-adv.html#ggsci"><i class="fa fa-check"></i><b>3.2.1</b> {ggsci}</a></li>
<li class="chapter" data-level="3.2.2" data-path="vis-adv.html"><a href="vis-adv.html#ggforce"><i class="fa fa-check"></i><b>3.2.2</b> {ggforce}</a></li>
<li class="chapter" data-level="3.2.3" data-path="vis-adv.html"><a href="vis-adv.html#gganimate-1"><i class="fa fa-check"></i><b>3.2.3</b> {gganimate}</a></li>
<li class="chapter" data-level="3.2.4" data-path="vis-adv.html"><a href="vis-adv.html#ggtext"><i class="fa fa-check"></i><b>3.2.4</b> {ggtext}</a></li>
<li class="chapter" data-level="3.2.5" data-path="vis-adv.html"><a href="vis-adv.html#ggrepel"><i class="fa fa-check"></i><b>3.2.5</b> {ggrepel}</a></li>
<li class="chapter" data-level="3.2.6" data-path="vis-adv.html"><a href="vis-adv.html#ggiraph"><i class="fa fa-check"></i><b>3.2.6</b> {ggiraph}</a></li>
<li class="chapter" data-level="3.2.7" data-path="vis-adv.html"><a href="vis-adv.html#ggbeeswarm"><i class="fa fa-check"></i><b>3.2.7</b> {ggbeeswarm}</a></li>
<li class="chapter" data-level="3.2.8" data-path="vis-adv.html"><a href="vis-adv.html#ggpmisc"><i class="fa fa-check"></i><b>3.2.8</b> {ggpmisc}</a></li>
<li class="chapter" data-level="3.2.9" data-path="vis-adv.html"><a href="vis-adv.html#esquisse"><i class="fa fa-check"></i><b>3.2.9</b> {esquisse}</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Tidying, transforming and importing</b></span></li>
<li class="chapter" data-level="4" data-path="transformation.html"><a href="transformation.html"><i class="fa fa-check"></i><b>4</b> Transformation</a><ul>
<li class="chapter" data-level="4.1" data-path="transformation.html"><a href="transformation.html#package-conflicted"><i class="fa fa-check"></i><b>4.1</b> Package: {conflicted}</a></li>
<li class="chapter" data-level="4.2" data-path="transformation.html"><a href="transformation.html#filtering-dplyrfilter"><i class="fa fa-check"></i><b>4.2</b> Filtering: <code>dplyr::filter()</code></a></li>
<li class="chapter" data-level="4.3" data-path="transformation.html"><a href="transformation.html#sort-rows-dplyrarrange"><i class="fa fa-check"></i><b>4.3</b> Sort rows: <code>dplyr::arrange()</code></a></li>
<li class="chapter" data-level="4.4" data-path="transformation.html"><a href="transformation.html#the-pipe"><i class="fa fa-check"></i><b>4.4</b> The pipe</a><ul>
<li class="chapter" data-level="4.4.1" data-path="transformation.html"><a href="transformation.html#further-advantages"><i class="fa fa-check"></i><b>4.4.1</b> Further advantages</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="transformation.html"><a href="transformation.html#pick-columns-dplyrselect"><i class="fa fa-check"></i><b>4.5</b> Pick columns: <code>dplyr::select()</code></a></li>
<li class="chapter" data-level="4.6" data-path="transformation.html"><a href="transformation.html#create-new-columns-based-on-old-ones-dplyrmutate"><i class="fa fa-check"></i><b>4.6</b> Create new columns based on old ones: <code>dplyr::mutate()</code></a></li>
<li class="chapter" data-level="4.7" data-path="transformation.html"><a href="transformation.html#summarize-data-by-groups-dplyrsummarize-dplyrgroup_by-dplyrungroup"><i class="fa fa-check"></i><b>4.7</b> Summarize data (by groups): <code>dplyr::summarize()</code>, <code>dplyr::group_by()</code> + <code>dplyr::ungroup()</code></a></li>
<li class="chapter" data-level="4.8" data-path="transformation.html"><a href="transformation.html#summary-plots"><i class="fa fa-check"></i><b>4.8</b> Summary-plots</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="import.html"><a href="import.html"><i class="fa fa-check"></i><b>5</b> Import</a><ul>
<li class="chapter" data-level="5.1" data-path="import.html"><a href="import.html#import-single-files"><i class="fa fa-check"></i><b>5.1</b> Import single files</a></li>
<li class="chapter" data-level="5.2" data-path="import.html"><a href="import.html#import-many-files"><i class="fa fa-check"></i><b>5.2</b> Import many files</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="tidying.html"><a href="tidying.html"><i class="fa fa-check"></i><b>6</b> Tidying</a><ul>
<li class="chapter" data-level="6.1" data-path="tidying.html"><a href="tidying.html#pivoting"><i class="fa fa-check"></i><b>6.1</b> Pivoting</a><ul>
<li class="chapter" data-level="6.1.1" data-path="tidying.html"><a href="tidying.html#convert-to-longer-form"><i class="fa fa-check"></i><b>6.1.1</b> Convert to longer form</a></li>
<li class="chapter" data-level="6.1.2" data-path="tidying.html"><a href="tidying.html#convert-to-wider-form"><i class="fa fa-check"></i><b>6.1.2</b> Convert to wider form</a></li>
<li class="chapter" data-level="6.1.3" data-path="tidying.html"><a href="tidying.html#use-cases"><i class="fa fa-check"></i><b>6.1.3</b> Use cases</a></li>
<li class="chapter" data-level="6.1.4" data-path="tidying.html"><a href="tidying.html#combining-vertically"><i class="fa fa-check"></i><b>6.1.4</b> Combining vertically</a></li>
<li class="chapter" data-level="6.1.5" data-path="tidying.html"><a href="tidying.html#tidy-data"><i class="fa fa-check"></i><b>6.1.5</b> Tidy data</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="tidying.html"><a href="tidying.html#separating-and-uniting"><i class="fa fa-check"></i><b>6.2</b> Separating and uniting</a><ul>
<li class="chapter" data-level="6.2.1" data-path="tidying.html"><a href="tidying.html#parsing-numbers"><i class="fa fa-check"></i><b>6.2.1</b> Parsing numbers</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="tidying.html"><a href="tidying.html#section"><i class="fa fa-check"></i><b>6.3</b> <No caption defined></a></li>
</ul></li>
<li class="part"><span><b>III Reporting</b></span></li>
<li class="chapter" data-level="7" data-path="reporting.html"><a href="reporting.html"><i class="fa fa-check"></i><b>7</b> Reporting</a><ul>
<li class="chapter" data-level="7.1" data-path="reporting.html"><a href="reporting.html#overview"><i class="fa fa-check"></i><b>7.1</b> Overview</a></li>
<li class="chapter" data-level="7.2" data-path="reporting.html"><a href="reporting.html#the-yaml-header"><i class="fa fa-check"></i><b>7.2</b> The YAML header</a></li>
<li class="chapter" data-level="7.3" data-path="reporting.html"><a href="reporting.html#literate-programming-in-r"><i class="fa fa-check"></i><b>7.3</b> Literate programming in R</a><ul>
<li class="chapter" data-level="7.3.1" data-path="reporting.html"><a href="reporting.html#r-markdown-packages"><i class="fa fa-check"></i><b>7.3.1</b> R Markdown packages</a></li>
<li class="chapter" data-level="7.3.2" data-path="reporting.html"><a href="reporting.html#code-chunks-in-r-markdown"><i class="fa fa-check"></i><b>7.3.2</b> Code chunks in R Markdown</a></li>
<li class="chapter" data-level="7.3.3" data-path="reporting.html"><a href="reporting.html#r-notebooks"><i class="fa fa-check"></i><b>7.3.3</b> R Notebooks</a></li>
<li class="chapter" data-level="7.3.4" data-path="reporting.html"><a href="reporting.html#workflow"><i class="fa fa-check"></i><b>7.3.4</b> Workflow</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="reporting.html"><a href="reporting.html#shiny-interactive-visualizations"><i class="fa fa-check"></i><b>7.4</b> Shiny: Interactive visualizations</a></li>
</ul></li>
<li class="part"><span><b>IV Appendix</b></span></li>
<li class="chapter" data-level="8" data-path="best-practices.html"><a href="best-practices.html"><i class="fa fa-check"></i><b>8</b> Best practices</a><ul>
<li class="chapter" data-level="8.1" data-path="best-practices.html"><a href="best-practices.html#description"><i class="fa fa-check"></i><b>8.1</b> DESCRIPTION</a></li>
<li class="chapter" data-level="8.2" data-path="best-practices.html"><a href="best-practices.html#r"><i class="fa fa-check"></i><b>8.2</b> R</a></li>
<li class="chapter" data-level="8.3" data-path="best-practices.html"><a href="best-practices.html#roxygen2"><i class="fa fa-check"></i><b>8.3</b> roxygen2</a></li>
<li class="chapter" data-level="8.4" data-path="best-practices.html"><a href="best-practices.html#testthat"><i class="fa fa-check"></i><b>8.4</b> testthat</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Visualization, transformation and reporting with the tidyverse</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="vis-basics" class="section level1">
<h1><span class="header-section-number">2</span> {ggplot2} basics</h1>
<blockquote>
<p>Embracing the grammar of graphics.</p>
</blockquote>
<p>This chapter discusses plotting with the <a href="https://ggplot2.tidyverse.org/">ggplot2 package</a>.</p>
<div id="basics-for-visualisation-in-r-using-ggplot2" class="section level2">
<h2><span class="header-section-number">2.1</span> Basics for visualisation in R using {ggplot2}</h2>
<details>
<p><summary><em>Click here to show setup code.</em></summary></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
</details>
<p><br></p>
<p>In the {tidyverse} the standard package for visualization is {ggplot2}.
The functions of this package follow a quite unique logic (the “grammar of graphics”) and therefore require a special syntax.
In this section we want to give a short introduction, how to get started with {ggplot2}.</p>
<div id="creating-the-plot-skeleton-ggplot" class="section level3">
<h3><span class="header-section-number">2.1.1</span> Creating the plot skeleton: <code>ggplot()</code></h3>
<p>The main function in the package is <code>ggplot()</code>, which prepares/creates a graph.
By setting the arguments of the function, you can:</p>
<ol style="list-style-type: decimal">
<li>Choose the dataset to be plotted (argument <code>data</code>)</li>
<li>Choose the mapping of the variables to the axes (or further forms of setting apart data) in the argument <code>mapping</code>.
This argument takes the result of the function <code>aes()</code>, which you will get to know in many different examples.</li>
</ol>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb13-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb13-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)</a>
<a class="sourceLine" id="cb13-4" data-line-number="4">)</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/11-empty-graph-1.png" width="624" style="display: block; margin: auto;" /></p>
<p>This created only an empty plot, because we did not tell {ggplot2} which geometry we want to use to display the variables we set in the <code>ggplot()</code> call.
We do this by adding (with the help of the <code>+</code> operator after the <code>ggplot()</code>-call) a different function starting with <code>geom_</code> to provide this information.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb14-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb14-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)</a>
<a class="sourceLine" id="cb14-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/11-scatterplot-1.png" width="624" style="display: block; margin: auto;" /></p>
<p>This is maybe the most basic plot you can create.
To map a different variable than <code>disp</code> to the x-axis, change the respective variable name in the <code>aes()</code> argument.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb15-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb15-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> cyl, <span class="dt">y =</span> hwy)</a>
<a class="sourceLine" id="cb15-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/11-aes-determines-which-variables-are-plotted-1.png" width="624" style="display: block; margin: auto;" /></p>
<p>You can exchange the variables to be plotted freely, without changing anything else to the rest of the code.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb16-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb16-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> hwy, <span class="dt">y =</span> cty)</a>
<a class="sourceLine" id="cb16-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/11-pattern-unchanged-if-only-variables-are-plotted-1.png" width="624" style="display: block; margin: auto;" /></p>
<p>Always good to have: The <em>ggplot2</em> cheatsheet (<a href="https://github.com/rstudio/cheatsheets/blob/master/data-visualization-2.1.pdf" class="uri">https://github.com/rstudio/cheatsheets/blob/master/data-visualization-2.1.pdf</a>).</p>
</div>
<div id="what-is-a-statistical-graphic" class="section level3">
<h3><span class="header-section-number">2.1.2</span> What is a “statistical graphic”?</h3>
<p>Wilkinson (2005) defines a grammar to describe the basic elements of a
statistical graphic:</p>
<blockquote>
<p>“[…] a statistical graphic is a mapping from data to
aesthetic attributes (colour, shape, size) of geometric objects
(points, line, bars).”</p>
</blockquote>
<p>(Wickham, 2009)</p>
</div>
<div id="terminology" class="section level3">
<h3><span class="header-section-number">2.1.3</span> Terminology</h3>
<ul>
<li><p><strong>Data:</strong> The data to visualize – consists of variables and observations.</p></li>
<li><p><strong>Geoms:</strong> Geometric objects which represent the data (points, lines, polygons, etc.).</p></li>
<li><p><strong>Mappings:</strong> Match variables with aesthetic attributes of the (geometric) objects.</p></li>
<li><p><strong>Scales:</strong> Mapping of the “data units” to “physical units” of the geometric objects (e.g. length, diameter or color); defines the <em>legend</em>.</p></li>
<li><p><strong>Coord:</strong> System of coordinates, mapping of the data to a two dimensional plain of the graphic; defines the <em>axes</em> and <em>grid</em>.</p></li>
<li><p><strong>Stats:</strong> Statistical transformation of the data (5 point summary, classification, etc.).</p></li>
<li><p><strong>Facetting:</strong> Division and illustration of data subsets, also known as “Trellis” images.</p></li>
</ul>
</div>
<div id="the-grammar-of-graphics" class="section level3">
<h3><span class="header-section-number">2.1.4</span> The Grammar of graphics …</h3>
<p><strong>is …</strong></p>
<p>a formal guideline which describes the dependencies between all elements of a
statistical graphic.</p>
<p><br></p>
<p><strong>isn’t …</strong></p>
<ul>
<li>a manual which tells us <em>which graphic</em> should be created for a given question.</li>
<li>a specification <em>how</em> a statistical graphic should look like.</li>
</ul>
</div>
<div id="about-ggplot2" class="section level3">
<h3><span class="header-section-number">2.1.5</span> About {ggplot2}</h3>
<pre><code>## Package: ggplot2
## Version: 3.2.1
## Title: Create Elegant Data Visualisations Using the Grammar of Graphics
## Depends: R (&gt;= 3.2)
## Imports: digest, grDevices, grid, gtable (&gt;= 0.1.1), lazyeval, MASS, mgcv,
##          reshape2, rlang (&gt;= 0.3.0), scales (&gt;= 0.5.0), stats, tibble,
##          viridisLite, withr (&gt;= 2.0.0)
## License: GPL-2 | file LICENSE
## URL: http://ggplot2.tidyverse.org, https://github.com/tidyverse/ggplot2
## BugReports: https://github.com/tidyverse/ggplot2/issues
## Encoding: UTF-8
## Author: Hadley Wickham [aut, cre], Winston Chang [aut], Lionel Henry [aut],
##          Thomas Lin Pedersen [aut], Kohske Takahashi [aut], Claus Wilke [aut],
##          Kara Woo [aut], Hiroaki Yutani [aut], RStudio [cph]
## Maintainer: Hadley Wickham &lt;hadley@rstudio.com&gt;
## 
## -- File:</code></pre>
</div>
</div>
<div id="geom_-functions" class="section level2">
<h2><span class="header-section-number">2.2</span> <code>geom_*</code> functions</h2>
<details>
<p><summary><em>Click here to show setup code.</em></summary></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
</details>
<p><code>geom_*</code> functions are added to the main <code>ggplot()</code> call via the “+” operator and
(usually) placed on a new line.</p>
<p>A list of all available “geoms” can be found here:</p>
<p><a href="https://ggplot2.tidyverse.org/reference/#section-layer-geoms" class="uri">https://ggplot2.tidyverse.org/reference/#section-layer-geoms</a></p>
<p>The most popular ones are</p>
<ul>
<li><p><code>geom_point()</code></p></li>
<li><p><code>geom_histogram()</code></p></li>
<li><p><code>geom_boxplot()</code></p></li>
<li><p><code>geom_bar()</code></p></li>
</ul>
<hr />
<p>The <code>geom_*</code> family can be divided into three parts:</p>
<p><strong>One variable plots</strong></p>
<ul>
<li><code>geom_hist()</code></li>
<li><code>geom_bar()</code></li>
<li>etc.</li>
</ul>
<p><strong>Two variable plots</strong></p>
<ul>
<li><code>geom_point()</code></li>
<li><code>geom_line()</code></li>
<li><code>geom_boxplot()</code></li>
<li>etc.</li>
</ul>
<p><strong>Three variables plots</strong></p>
<ul>
<li><code>geom_raster()</code></li>
<li><code>geom_sf()</code></li>
<li><code>geom_tile()</code></li>
<li>etc.</li>
</ul>
<div id="arguments" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Arguments</h3>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw">ggplot</span>(data, <span class="dt">mapping =</span> <span class="kw">aes</span>(), ...) <span class="op">+</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_XXX</span>(<span class="dt">mapping =</span> <span class="ot">NULL</span>, <span class="dt">data =</span> <span class="ot">NULL</span>, stat, ...)</a></code></pre></div>
<p><code>geom_*</code> functions have the same basic arguments as <code>ggplot()</code>.
In addition, they come with more arguments specific to the respective “geom”.</p>
<p><strong>stat</strong></p>
<p>The <code>stat</code> parameter defines a statistical transformation:</p>
<ul>
<li><p>if set to <code>&quot;identity&quot;</code>: No transformation</p></li>
<li><p>if set to <code>boxplot</code>: Boxplot transformation</p></li>
<li><p>etc.</p></li>
</ul>
<p><strong>position</strong></p>
<p>The same applies to the <code>position</code> argument.
In the example below, points are not adjusted and just visualized where they appear in the data.</p>
<p>In the case of boxplots, a special position arrangement function is used to arrange everything nicely: <code>position_dodge2()</code> (here denoted by <code>position = &quot;dodge2&quot;</code>).</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="ot">NULL</span>, <span class="dt">data =</span> <span class="ot">NULL</span>, <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>,</a>
<a class="sourceLine" id="cb20-2" data-line-number="2">  <span class="dt">position =</span> <span class="st">&quot;identity&quot;</span>, ..., <span class="dt">na.rm =</span> <span class="ot">FALSE</span>, <span class="dt">show.legend =</span> <span class="ot">NA</span>,</a>
<a class="sourceLine" id="cb20-3" data-line-number="3">  <span class="dt">inherit.aes =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb20-4" data-line-number="4"></a>
<a class="sourceLine" id="cb20-5" data-line-number="5"><span class="kw">geom_boxplot</span>(<span class="dt">mapping =</span> <span class="ot">NULL</span>, <span class="dt">data =</span> <span class="ot">NULL</span>, <span class="dt">stat =</span> <span class="st">&quot;boxplot&quot;</span>,</a>
<a class="sourceLine" id="cb20-6" data-line-number="6">  <span class="dt">position =</span> <span class="st">&quot;dodge2&quot;</span>, ..., <span class="dt">outlier.colour =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb20-7" data-line-number="7">  <span class="dt">outlier.color =</span> <span class="ot">NULL</span>, <span class="dt">outlier.fill =</span> <span class="ot">NULL</span>, <span class="dt">outlier.shape =</span> <span class="dv">19</span>,</a>
<a class="sourceLine" id="cb20-8" data-line-number="8">  <span class="dt">outlier.size =</span> <span class="fl">1.5</span>, <span class="dt">outlier.stroke =</span> <span class="fl">0.5</span>, <span class="dt">outlier.alpha =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb20-9" data-line-number="9">  <span class="dt">notch =</span> <span class="ot">FALSE</span>, <span class="dt">notchwidth =</span> <span class="fl">0.5</span>, <span class="dt">varwidth =</span> <span class="ot">FALSE</span>, <span class="dt">na.rm =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb20-10" data-line-number="10">  <span class="dt">show.legend =</span> <span class="ot">NA</span>, <span class="dt">inherit.aes =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<hr />
<p><code>geom_boxplot()</code> needs one variable to be of class <code>character</code> or <code>factor</code> (better) to initiate the grouping.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw">class</span>(mpg<span class="op">$</span>class)</a></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(<span class="dt">x =</span> class, <span class="dt">y =</span> displ)) <span class="op">+</span></a>
<a class="sourceLine" id="cb23-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_boxplot</span>()</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/12-geom-point-mapping-null-data-null-stat-identity-1.png" width="624" style="display: block; margin: auto;" /></p>
</div>
<div id="combining-geoms" class="section level3">
<h3><span class="header-section-number">2.2.2</span> Combining geoms</h3>
<p>Multiple <code>geom_*</code> functions can be used in one plot.
A combination that is often used together is <code>geom_point()</code> and <code>geom_smooth()</code></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb24-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>)</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/unnamed-chunk-37-1.png" width="624" style="display: block; margin: auto;" /></p>
<p>Unless specified differently in the <code>geom_*()</code> call, all geoms will use the same variables.</p>
</div>
<div id="summary" class="section level3">
<h3><span class="header-section-number">2.2.3</span> Summary</h3>
<p>The modular principle of <code>ggplot2</code> enables:</p>
<ul>
<li>the combination of any geometric objects (geoms).</li>
<li>a high flexibility and customizability</li>
</ul>
<p>An extensive description of all geometric objects can be found on the <code>ggplot2</code> website <a href="https://ggplot2.tidyverse.org/reference/" class="uri">https://ggplot2.tidyverse.org/reference/</a>.</p>
<p><strong>Exercises</strong></p>
<p><a href="https://krlmlr.github.io/vistransrep/2019-11-zhr/geoms.html" class="uri">https://krlmlr.github.io/vistransrep/2019-11-zhr/geoms.html</a></p>
</div>
</div>
<div id="two-variable-plots" class="section level2">
<h2><span class="header-section-number">2.3</span> Two variable plots</h2>
<details>
<p><summary><em>Click here to show setup code.</em></summary></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
<p>“Two variable plots” can be split into sub-categories:</p>
<ul>
<li><p>Continuous X and Y</p></li>
<li><p>Continuous X and discrete Y (and vice-versa)</p></li>
<li><p>Discrete X and Y</p></li>
</ul>
<div id="continuous-x-and-y" class="section level3">
<h3><span class="header-section-number">2.3.1</span> Continuous X and Y</h3>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(<span class="dt">x =</span> cty, <span class="dt">y =</span> hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb26-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/unnamed-chunk-39-1.png" width="624" style="display: block; margin: auto;" /></p>
</div>
<div id="discrete-x-and-continuous-y" class="section level3">
<h3><span class="header-section-number">2.3.2</span> Discrete X and continuous Y</h3>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(<span class="dt">x =</span> class, <span class="dt">y =</span> hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_boxplot</span>()</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/unnamed-chunk-40-1.png" width="624" style="display: block; margin: auto;" /></p>
<hr />
</div>
<div id="discrete-x-and-y" class="section level3">
<h3><span class="header-section-number">2.3.3</span> Discrete X and Y</h3>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(<span class="dt">x =</span> class, <span class="dt">y =</span> manufacturer)) <span class="op">+</span></a>
<a class="sourceLine" id="cb28-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_jitter</span>()</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/unnamed-chunk-41-1.png" width="624" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="one-variable-plots" class="section level2">
<h2><span class="header-section-number">2.4</span> One variable plots</h2>
<details>
<p><summary><em>Click here to show setup code.</em></summary></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
<p>This type of plots visualizes ONE variable in a certain way.</p>
<p>To do this in a 2D space, a <strong>statistical transformation</strong> of the variable is required for the missing axis.</p>
<div id="continuous-variables" class="section level3">
<h3><span class="header-section-number">2.4.1</span> Continuous variables</h3>
<ul>
<li><p>Histogram: Most common way - grouping the variable into equal bins</p></li>
<li><p><code>geom_density()</code>, <code>geom_freq()</code>, <code>geom_dotplot()</code> and <code>geom_area()</code> are mainly doing the same as <code>geom_hist()</code></p></li>
</ul>
<p>We supply only <em>one</em> variable to the <code>mapping</code> argument with the help of <code>aes()</code>.
This one is automatically grouped into 30 bins.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(<span class="dt">x =</span> hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb30-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_histogram</span>()</a></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with
## `binwidth`.</code></pre>
<p><img src="vistransrep_files/figure-html/unnamed-chunk-43-1.png" width="624" style="display: block; margin: auto;" /></p>
<hr />
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(<span class="dt">x =</span> hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb32-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_density</span>()</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/unnamed-chunk-44-1.png" width="624" style="display: block; margin: auto;" /></p>
</div>
<div id="discrete-variables" class="section level3">
<h3><span class="header-section-number">2.4.2</span> Discrete variables</h3>
<p>For discrete data, there is actually only one visualization method - the bar plot.</p>

<p><em>Note the difference of <code>geom_bar()</code> compared to <code>geom_hist()</code>.</em></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(fl)) <span class="op">+</span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_bar</span>()</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/unnamed-chunk-45-1.png" width="624" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="exercises" class="section level2">
<h2><span class="header-section-number">2.5</span> Exercises</h2>
<p><a href="https://krlmlr.github.io/vistransrep/2019-11-zhr/scatter.html" class="uri">https://krlmlr.github.io/vistransrep/2019-11-zhr/scatter.html</a></p>
</div>
<div id="colors-and-shape" class="section level2">
<h2><span class="header-section-number">2.6</span> Colors and shape</h2>
<details>
<p><summary><em>Click here to show setup code.</em></summary></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
</details>
<p><br></p>
<div id="static-colors" class="section level3">
<h3><span class="header-section-number">2.6.1</span> Static colors</h3>
<p>There are many ways to set a color for a specific geom.
The simplest is to set all observations of a geom to a dedicated color, supplied as a character value.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb35-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb35-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)</a>
<a class="sourceLine" id="cb35-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb35-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>(</a>
<a class="sourceLine" id="cb35-6" data-line-number="6">    <span class="dt">color =</span> <span class="st">&quot;blue&quot;</span></a>
<a class="sourceLine" id="cb35-7" data-line-number="7">  )</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/12-different-color-1.png" width="624" style="display: block; margin: auto;" /></p>
</div>
<div id="dynamic-colors" class="section level3">
<h3><span class="header-section-number">2.6.2</span> Dynamic colors</h3>
<p>Dynamic colors, which depend on a variable of the dataset, need to be passed within an <code>aes()</code> call.
A direct specification like in the example above with <code>color = &quot;blue&quot;</code> only works for static colors.</p>
<p><em>Good to know</em>: While it is possible to include <code>color = class</code> directly in the <code>aes()</code> call of the <code>ggplot()</code> function, it is recommended to set it within the particular geom.
This is for two reasons:</p>
<ul>
<li>When working with multiple geoms, you can use different mappings for each geom without any possibility of conflicts</li>
<li>When reading the code, it becomes more clear which settings apply to which geoms</li>
</ul>
<p><strong>Discrete</strong></p>
<p>Different colors can be mapped to the values of a variable by supplying a variable of the dataset.
The <code>class</code> variable is discrete and leads to a discrete color scale.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb36-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb36-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)</a>
<a class="sourceLine" id="cb36-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb36-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> class))</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/12-color-as-3-rd-aesthetic-discrete-1.png" width="624" style="display: block; margin: auto;" /></p>
<p><strong>Continuous</strong></p>
<p>The <code>cty</code> attribute is continuous, the color scale is adapted accordingly.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb37-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb37-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)</a>
<a class="sourceLine" id="cb37-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb37-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> cty))</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/12-color-as-3-rd-aesthetic-continuous-1.png" width="624" style="display: block; margin: auto;" /></p>
</div>
<div id="shape" class="section level3">
<h3><span class="header-section-number">2.6.3</span> Shape</h3>
<p>One more degree of freedom is the shape of the symbols to be plotted.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb38-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb38-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb38-4" data-line-number="4">    <span class="dt">x =</span> displ,</a>
<a class="sourceLine" id="cb38-5" data-line-number="5">    <span class="dt">y =</span> hwy</a>
<a class="sourceLine" id="cb38-6" data-line-number="6">  )</a>
<a class="sourceLine" id="cb38-7" data-line-number="7">) <span class="op">+</span></a>
<a class="sourceLine" id="cb38-8" data-line-number="8"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">shape =</span> fl))</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/12-point-shape-as-3-rd-aesthetic-1.png" width="624" style="display: block; margin: auto;" /></p>
</div>
<div id="combining-color-and-shape" class="section level3">
<h3><span class="header-section-number">2.6.4</span> Combining color and shape</h3>
<p>Color and shape can be combined.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb39-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb39-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb39-4" data-line-number="4">    <span class="dt">x =</span> displ,</a>
<a class="sourceLine" id="cb39-5" data-line-number="5">    <span class="dt">y =</span> hwy,</a>
<a class="sourceLine" id="cb39-6" data-line-number="6">  )</a>
<a class="sourceLine" id="cb39-7" data-line-number="7">) <span class="op">+</span></a>
<a class="sourceLine" id="cb39-8" data-line-number="8"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> class, <span class="dt">shape =</span> drv))</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/12-shape-mapped-on-drv-1.png" width="624" style="display: block; margin: auto;" /></p>
<p>And last but not least, the size of the plotted symbols can be linked to numeric values of the mapped variable.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb40-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb40-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb40-4" data-line-number="4">    <span class="dt">x =</span> displ,</a>
<a class="sourceLine" id="cb40-5" data-line-number="5">    <span class="dt">y =</span> hwy,</a>
<a class="sourceLine" id="cb40-6" data-line-number="6">    <span class="dt">size =</span> cty</a>
<a class="sourceLine" id="cb40-7" data-line-number="7">  )</a>
<a class="sourceLine" id="cb40-8" data-line-number="8">) <span class="op">+</span></a>
<a class="sourceLine" id="cb40-9" data-line-number="9"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/12-point-size-as-3-rd-aesthetic-1.png" width="624" style="display: block; margin: auto;" /></p>
<p>You can mix different aesthetic mappings in order to produce a plot with densely packed information.
However, be aware that adding too much information to a plot does not necessarily make it better.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb41-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb41-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb41-4" data-line-number="4">    <span class="dt">x =</span> displ,</a>
<a class="sourceLine" id="cb41-5" data-line-number="5">    <span class="dt">y =</span> hwy,</a>
<a class="sourceLine" id="cb41-6" data-line-number="6">    <span class="dt">color =</span> class,</a>
<a class="sourceLine" id="cb41-7" data-line-number="7">    <span class="dt">size =</span> cty</a>
<a class="sourceLine" id="cb41-8" data-line-number="8">  )</a>
<a class="sourceLine" id="cb41-9" data-line-number="9">) <span class="op">+</span></a>
<a class="sourceLine" id="cb41-10" data-line-number="10"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/12-mix-to-increase-num-of-aesthetics-1.png" width="624" style="display: block; margin: auto;" /></p>
</div>
<div id="transparency" class="section level3">
<h3><span class="header-section-number">2.6.5</span> Transparency</h3>
<p>Semi-transparency is another way to better display your data when observations are overlapping.
This is useful to get an impression of how many data points share the same coordinates.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb42-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb42-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb42-4" data-line-number="4">    <span class="dt">x =</span> displ,</a>
<a class="sourceLine" id="cb42-5" data-line-number="5">    <span class="dt">y =</span> hwy</a>
<a class="sourceLine" id="cb42-6" data-line-number="6">  )</a>
<a class="sourceLine" id="cb42-7" data-line-number="7">) <span class="op">+</span></a>
<a class="sourceLine" id="cb42-8" data-line-number="8"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.2</span>)</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/12-semi-transparency-1.png" width="624" style="display: block; margin: auto;" /></p>
</div>
<div id="what-can-go-wrong" class="section level3">
<h3><span class="header-section-number">2.6.6</span> What can go wrong</h3>
<p>If you try to specify a color in the <code>mapping</code>-argument of the main <code>ggplot()</code> call, you will face an error since a mapping of a variable to an aesthetic is expected.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1"><span class="kw">try</span>(<span class="kw">print</span>(</a>
<a class="sourceLine" id="cb43-2" data-line-number="2">  <span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb43-3" data-line-number="3">    <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb43-4" data-line-number="4">    <span class="dt">mapping =</span> <span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb43-5" data-line-number="5">      <span class="dt">x =</span> displ,</a>
<a class="sourceLine" id="cb43-6" data-line-number="6">      <span class="dt">y =</span> hwy,</a>
<a class="sourceLine" id="cb43-7" data-line-number="7">      <span class="dt">color =</span> blue</a>
<a class="sourceLine" id="cb43-8" data-line-number="8">    )</a>
<a class="sourceLine" id="cb43-9" data-line-number="9">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb43-10" data-line-number="10"><span class="st">    </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb43-11" data-line-number="11">))</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/12-unquoted-col-in-aes-1.png" width="624" style="display: block; margin: auto;" /></p>
<p>R treats objects without quotation marks in a special way, expecting them to be variables.
Since <code>blue</code> is not a variable of <code>mpg</code>, this did not work.
Use quotation marks if you mean a string, as opposed to a variable or object name.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1">mpg</a></code></pre></div>
<PRE class="fansi fansi-output"><CODE>## <span style='color: #555555;'># A tibble: 234 x 11</span><span>
##   </span><span style='font-weight: bold;'>manufacturer</span><span> </span><span style='font-weight: bold;'>model</span><span> </span><span style='font-weight: bold;'>displ</span><span>  </span><span style='font-weight: bold;'>year</span><span>   </span><span style='font-weight: bold;'>cyl</span><span> </span><span style='font-weight: bold;'>trans</span><span> </span><span style='font-weight: bold;'>drv</span><span>     </span><span style='font-weight: bold;'>cty</span><span>   </span><span style='font-weight: bold;'>hwy</span><span>
##   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>        </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span>
## </span><span style='color: #555555;'>1</span><span> audi         a4      1.8  </span><span style='text-decoration: underline;'>1</span><span>999     4 auto… f        18    29
## </span><span style='color: #555555;'>2</span><span> audi         a4      1.8  </span><span style='text-decoration: underline;'>1</span><span>999     4 manu… f        21    29
## </span><span style='color: #555555;'>3</span><span> audi         a4      2    </span><span style='text-decoration: underline;'>2</span><span>008     4 manu… f        20    31
## </span><span style='color: #555555;'># … with 231 more rows, and 2 more variables: </span><span style='color: #555555;font-weight: bold;'>fl</span><span style='color: #555555;'> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span style='color: #555555;'>,
## #   </span><span style='color: #555555;font-weight: bold;'>class</span><span style='color: #555555;'> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>
</span></CODE></PRE>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1"><span class="st">&quot;mpg&quot;</span></a></code></pre></div>
<pre><code>## [1] &quot;mpg&quot;</code></pre>
<p>So what if we pass the color as a character variable?</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb47-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb47-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb47-4" data-line-number="4">    <span class="dt">x =</span> displ,</a>
<a class="sourceLine" id="cb47-5" data-line-number="5">    <span class="dt">y =</span> hwy,</a>
<a class="sourceLine" id="cb47-6" data-line-number="6">    <span class="dt">color =</span> <span class="st">&quot;blue&quot;</span></a>
<a class="sourceLine" id="cb47-7" data-line-number="7">  )</a>
<a class="sourceLine" id="cb47-8" data-line-number="8">) <span class="op">+</span></a>
<a class="sourceLine" id="cb47-9" data-line-number="9"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/12-quoted-color-in-aes-1.png" width="624" style="display: block; margin: auto;" /></p>
<p>At least there was no error, but now the constant value <code>blue</code> is mapped to the first default color of the color mapping, which happens to be red.
We could have been fooled, if it had been blue.
Recall, it is best to specify geom related mappings with the respective geom function.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb48-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb48-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb48-4" data-line-number="4">    <span class="dt">x =</span> displ,</a>
<a class="sourceLine" id="cb48-5" data-line-number="5">    <span class="dt">y =</span> hwy</a>
<a class="sourceLine" id="cb48-6" data-line-number="6">  )</a>
<a class="sourceLine" id="cb48-7" data-line-number="7">) <span class="op">+</span></a>
<a class="sourceLine" id="cb48-8" data-line-number="8"><span class="st">  </span><span class="kw">geom_point</span>(</a>
<a class="sourceLine" id="cb48-9" data-line-number="9">    <span class="dt">color =</span> <span class="st">&quot;blue&quot;</span></a>
<a class="sourceLine" id="cb48-10" data-line-number="10">  )</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/12-correct-way-to-specify-manual-aesthetic-1.png" width="624" style="display: block; margin: auto;" /></p>
<p><strong>Exercises</strong></p>
<p><a href="https://krlmlr.github.io/vistransrep/2019-11-zhr/scatter3.html" class="uri">https://krlmlr.github.io/vistransrep/2019-11-zhr/scatter3.html</a></p>
</div>
</div>
<div id="labels" class="section level2">
<h2><span class="header-section-number">2.7</span> Labels</h2>
<details>
<p><summary><em>Click here to show setup code.</em></summary></p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
</details>
<p>For character variables there is further way of integrating its value to a plot.
<code>geom_text()</code> takes a <code>label</code> argument, which influences the plot in the following way.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb50-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb50-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)</a>
<a class="sourceLine" id="cb50-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb50-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_text</span>(<span class="dt">label =</span> <span class="st">&quot;A&quot;</span>)</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/13-geom-text-1.png" width="624" style="display: block; margin: auto;" /></p>
<p>Let’s try to map this argument to a variable (here: <code>drv</code>) of our dataset in the <code>mapping</code> argument of <code>ggplot()</code>.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb51-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb51-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)</a>
<a class="sourceLine" id="cb51-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb51-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_text</span>(<span class="dt">label =</span> <span class="st">&quot;drv&quot;</span>)</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/13-set-label-in-aes-for-geom-text-1.png" width="624" style="display: block; margin: auto;" /></p>
<p>Right, of course we need to pass the variable without quotation marks, otherwise it is interpreted as a (constant) character variable.
When changing this, a vector with the values of the variable is passed on to <code>geom_text()</code>.
This is one way of including the values of character variables in a plot.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb52-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb52-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)</a>
<a class="sourceLine" id="cb52-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb52-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> drv))</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/13-3-rd-aesthetic-as-label-for-geom-text-1.png" width="624" style="display: block; margin: auto;" /></p>
<p>When adding more than one <code>geom()</code>-function, multiple geometries are added to the plot.
However, because <code>geom_point()</code> has no support for passing a label, we can only use this mapping in <code>geom_text()</code>.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb53-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb53-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)</a>
<a class="sourceLine" id="cb53-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb53-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb53-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> drv))</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/13-two-layers-1.png" width="624" style="display: block; margin: auto;" /></p>
<p>Since this looks just slightly odd, let’s try to make it more apparent, what is happening.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb54-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb54-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)</a>
<a class="sourceLine" id="cb54-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb54-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">color =</span> <span class="st">&quot;blue&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb54-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> drv), <span class="dt">size =</span> <span class="dv">10</span>)</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/13-two-layers-more-clearly-1.png" width="624" style="display: block; margin: auto;" /></p>
</div>
<div id="themes" class="section level2">
<h2><span class="header-section-number">2.8</span> Themes</h2>
<details>
<p><summary><em>Click here to show setup code.</em></summary></p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
</details>
<p><br></p>
<p>In this section we are looking at the use of visual themes to easily change the look and feel of a plot.
We start with the introduction of the default theme – <code>theme_grey()</code> function.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb56-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb56-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)</a>
<a class="sourceLine" id="cb56-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb56-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb56-6" data-line-number="6"><span class="st">  </span><span class="kw">theme_grey</span>()</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/17-base-plot-1.png" width="624" style="display: block; margin: auto;" /></p>
<p>Change the default <code>theme_grey()</code> to a more traditional black-and-white theme:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb57-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb57-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)</a>
<a class="sourceLine" id="cb57-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb57-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb57-6" data-line-number="6"><span class="st">  </span><span class="kw">theme_bw</span>()</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/17-bw-theme-1.png" width="624" style="display: block; margin: auto;" /></p>
<p>Also in this scheme the color aesthetic works as it normally does.
The black-and-whiteness only relates to the background.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb58-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb58-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> class)</a>
<a class="sourceLine" id="cb58-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb58-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb58-6" data-line-number="6"><span class="st">  </span><span class="kw">theme_bw</span>()</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/17-data-can-have-color-in-bw-theme-1.png" width="624" style="display: block; margin: auto;" /></p>
<p>Calling the function <code>theme()</code> after a <code>theme_...()</code> call let’s you tweak certain aspects of the theme.</p>
<p>Some plots work better with the legend at the bottom.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb59-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb59-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> class)</a>
<a class="sourceLine" id="cb59-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb59-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb59-6" data-line-number="6"><span class="st">  </span><span class="kw">theme_bw</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb59-7" data-line-number="7"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/17-occasionally-useful-legend-at-the-bottom-1.png" width="624" style="display: block; margin: auto;" /></p>
<p>Mind that <code>theme_...()</code> functions overwrite all previous settings of <code>theme()</code>:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb60-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb60-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> class)</a>
<a class="sourceLine" id="cb60-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb60-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb60-6" data-line-number="6"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb60-7" data-line-number="7"><span class="st">  </span><span class="kw">theme_bw</span>()</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/18-theme-functions-overwrite-theme-if-called-afterwards-1.png" width="624" style="display: block; margin: auto;" /></p>
<p>The first argument of each <code>theme_...()</code> function is <code>base_size</code>, which refers to the font size of all elements in the plot.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb61-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb61-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> class)</a>
<a class="sourceLine" id="cb61-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb61-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb61-6" data-line-number="6"><span class="st">  </span><span class="kw">theme_bw</span>(<span class="dv">16</span>)</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/17-first-param-of-theme-functions-is-base-size-1.png" width="624" style="display: block; margin: auto;" /></p>
<p>If we were asked to suggest themes, we’d go for</p>
<ul>
<li><code>ggplot2::theme_minimal()</code></li>
<li><code>hrbrthemes::theme_ipsum()</code></li>
<li><code>ggpubr::theme_pubr()</code></li>
</ul>
<p>Here is how <code>ggpubr::theme_pubr()</code> looks like.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb62-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb62-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> class)</a>
<a class="sourceLine" id="cb62-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb62-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb62-6" data-line-number="6"><span class="st">  </span>ggpubr<span class="op">::</span><span class="kw">theme_pubr</span>()</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/17-predefined-themes-available-e-g-in-ggpubr-package-1.png" width="624" style="display: block; margin: auto;" /></p>
<p>Also from here onward we will use <code>theme_pubr()</code> as the default theme for plots.
This can be done by setting</p>
</div>
<div id="scales" class="section level2">
<h2><span class="header-section-number">2.9</span> Scales</h2>
<details>
<p><summary><em>Click here to show setup code.</em></summary></p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb63-2" data-line-number="2"><span class="kw">library</span>(ggpubr)</a></code></pre></div>
</details>
<p><br></p>
<p>In this section we want to spend some time getting to know how to customize the labels and scales of plots using {ggplot2}.
We start with a pretty basic plot using the <code>mpg</code>-tibble which comes with the {tidyverse}.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb64-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb64-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> class)</a>
<a class="sourceLine" id="cb64-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb64-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb64-6" data-line-number="6"><span class="st">  </span><span class="kw">theme_pubr</span>()</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/18-base-plot-1.png" width="624" style="display: block; margin: auto;" /></p>
<div id="labs" class="section level3">
<h3><span class="header-section-number">2.9.1</span> <code>labs()</code></h3>
<p>With <code>labs()</code> you can label all sorts of aesthetics (axes, color mapping, …).
Additionally you can set the title/subtitle and also add a caption and a tag.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb65-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb65-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> class)</a>
<a class="sourceLine" id="cb65-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb65-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb65-6" data-line-number="6"><span class="st">  </span><span class="kw">theme_pubr</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb65-7" data-line-number="7"><span class="st">  </span><span class="kw">labs</span>(</a>
<a class="sourceLine" id="cb65-8" data-line-number="8">    <span class="dt">x =</span> <span class="st">&quot;Displacement&quot;</span>,</a>
<a class="sourceLine" id="cb65-9" data-line-number="9">    <span class="dt">y =</span> <span class="st">&quot;Highway mileage</span><span class="ch">\n</span><span class="st">[miles per gallon]&quot;</span>,</a>
<a class="sourceLine" id="cb65-10" data-line-number="10">    <span class="dt">color =</span> <span class="st">&quot;Car class&quot;</span>,</a>
<a class="sourceLine" id="cb65-11" data-line-number="11">    <span class="dt">title =</span> <span class="st">&quot;Highway mileages depending on displacement&quot;</span>,</a>
<a class="sourceLine" id="cb65-12" data-line-number="12">    <span class="dt">subtitle =</span> <span class="st">&quot;By car class&quot;</span></a>
<a class="sourceLine" id="cb65-13" data-line-number="13">  )</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/18-add-descriptive-labels-the-labs-function-1.png" width="624" style="display: block; margin: auto;" /></p>
</div>
<div id="axes" class="section level3">
<h3><span class="header-section-number">2.9.2</span> Axes</h3>
<p>There is a plethora of <code>scale_...()</code> functions available in {ggplot2}, which influence the axes.
For example there is a function to change the scale of an axis to a logarithmic scale.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb66-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb66-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> class)</a>
<a class="sourceLine" id="cb66-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb66-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb66-6" data-line-number="6"><span class="st">  </span><span class="kw">theme_pubr</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb66-7" data-line-number="7"><span class="st">  </span><span class="kw">scale_x_log10</span>()</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/18-change-scale-to-log-scale-1.png" width="624" style="display: block; margin: auto;" /></p>
<p>Be careful: you can set the name of an axis in both the <code>labs()</code> function and the <code>scale_...()</code> functions.
If you do both, only the name set in the latter will prevail.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb67-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb67-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> class)</a>
<a class="sourceLine" id="cb67-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb67-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb67-6" data-line-number="6"><span class="st">  </span><span class="kw">labs</span>(</a>
<a class="sourceLine" id="cb67-7" data-line-number="7">    <span class="dt">x =</span> <span class="st">&quot;Displacement&quot;</span></a>
<a class="sourceLine" id="cb67-8" data-line-number="8">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb67-9" data-line-number="9"><span class="st">  </span><span class="kw">theme_pubr</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb67-10" data-line-number="10"><span class="st">  </span><span class="kw">scale_x_log10</span>(<span class="dt">name =</span> <span class="st">&quot;xxx&quot;</span>)</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/18-name-in-scale-overwrites-labs-without-warning-1.png" width="624" style="display: block; margin: auto;" /></p>
<hr />
<p>For more control over discrete and continuous axis labels, limits and breaks, the <code>scale_&lt;axis name&gt;_&lt;variable type&gt;</code> functions exist, e.g. <code>scale_x_continuous()</code>.</p>
<p>These enable custom axis breaks and labels if the ones autogenerated from the data are not sufficient.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" data-line-number="1"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ, hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb68-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb68-3" data-line-number="3"><span class="st">  </span><span class="kw">theme_pubr</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb68-4" data-line-number="4"><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">6</span>), <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>))</a></code></pre></div>
<pre><code>## Warning: Removed 27 rows containing missing values
## (geom_point).</code></pre>
<p><img src="vistransrep_files/figure-html/18-xxx1-1.png" width="624" style="display: block; margin: auto;" /></p>
<p>Values not falling into the custom limits will be silently droppend including a warning message.</p>
</div>
<div id="color-scale" class="section level3">
<h3><span class="header-section-number">2.9.3</span> Color scale</h3>
<p>Another type <code>scale_...()</code>-type function relates to the color-aesthetic.
These functions affect the palette that is used for the color mapping.
By default, <code>scale_color_hue()</code> will be used for categorical variables.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb70-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb70-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)</a>
<a class="sourceLine" id="cb70-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb70-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> class)) <span class="op">+</span></a>
<a class="sourceLine" id="cb70-6" data-line-number="6"><span class="st">  </span><span class="kw">theme_pubr</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb70-7" data-line-number="7"><span class="st">  </span><span class="kw">scale_color_hue</span>()</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/18-xxx2-1.png" width="624" style="display: block; margin: auto;" /></p>
<p>To change the color palette, pass a palette-function of your liking in the form of</p>
<ul>
<li><code>scale_color_&lt;name&gt;</code></li>
<li><code>scale_fill_&lt;name&gt;</code></li>
</ul>
<p>Whether to use <code>fill</code> or <code>color</code> depends on what keyword has been used for applying the color.
Points are colored by using the “color” keyword.
So to change the palette for point coloring, one needs to use <code>scale_color_&lt;name&gt;</code>.</p>
<p>A popular color palette is the <a href="https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html#gallery">viridis</a> color palette.
To specify that we are dealing with categorical values, we add a <code>_d</code> at the end which stands for “discrete”.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb71-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb71-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> class)</a>
<a class="sourceLine" id="cb71-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb71-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> class)) <span class="op">+</span></a>
<a class="sourceLine" id="cb71-6" data-line-number="6"><span class="st">  </span><span class="kw">theme_pubr</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb71-7" data-line-number="7"><span class="st">  </span><span class="kw">scale_color_viridis_d</span>()</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/18-xx3-1.png" width="624" style="display: block; margin: auto;" /></p>
<hr />
<p>To take full control of the colors <code>scale_color_manual()</code> should be used.
Here, color values (either as a string or in hex format) can be bound to a specific factor level.</p>
<p>This is useful if certain levels come with implicit meanings of their color choice.
Another helpful scenario is when there are more levels in the data than colors supported by the palette (most palettes support between 9-12 levels).</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb72-2" data-line-number="2">  <span class="dt">data =</span> mpg,</a>
<a class="sourceLine" id="cb72-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> class)</a>
<a class="sourceLine" id="cb72-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb72-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb72-6" data-line-number="6"><span class="st">  </span><span class="kw">theme_pubr</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb72-7" data-line-number="7"><span class="st">  </span><span class="kw">scale_color_manual</span>(<span class="dt">values =</span> <span class="kw">c</span>(</a>
<a class="sourceLine" id="cb72-8" data-line-number="8">    <span class="st">&quot;2seater&quot;</span> =<span class="st"> &quot;#000000&quot;</span>,</a>
<a class="sourceLine" id="cb72-9" data-line-number="9">    <span class="st">&quot;compact&quot;</span> =<span class="st"> &quot;#3355FF&quot;</span>,</a>
<a class="sourceLine" id="cb72-10" data-line-number="10">    <span class="st">&quot;midsize&quot;</span> =<span class="st"> &quot;#006400&quot;</span>,</a>
<a class="sourceLine" id="cb72-11" data-line-number="11">    <span class="st">&quot;minivan&quot;</span> =<span class="st"> &quot;#FF5522&quot;</span>,</a>
<a class="sourceLine" id="cb72-12" data-line-number="12">    <span class="st">&quot;pickup&quot;</span> =<span class="st"> &quot;#66FFFF&quot;</span>,</a>
<a class="sourceLine" id="cb72-13" data-line-number="13">    <span class="st">&quot;subcompact&quot;</span> =<span class="st"> &quot;#FF0000&quot;</span>,</a>
<a class="sourceLine" id="cb72-14" data-line-number="14">    <span class="st">&quot;suv&quot;</span> =<span class="st"> &quot;#FF55FF&quot;</span></a>
<a class="sourceLine" id="cb72-15" data-line-number="15">  ))</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/18-xxx4-1.png" width="624" style="display: block; margin: auto;" /></p>
<hr />
<p>Review the <a href="https://github.com/cttobin/ggthemr">{ggthemr} package</a> for tools that help with establishing a “corporate design” for documents.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">&quot;remotes&quot;</span>)</a>
<a class="sourceLine" id="cb73-2" data-line-number="2">remotes<span class="op">::</span><span class="kw">install_packages</span>(<span class="st">&quot;cttobin/ggthemr&quot;</span>)</a></code></pre></div>
<p><strong>Exercises</strong></p>
<p><a href="https://krlmlr.github.io/vistransrep/2019-11-zhr/scales.html" class="uri">https://krlmlr.github.io/vistransrep/2019-11-zhr/scales.html</a></p>
</div>
</div>
<div id="export-saving" class="section level2">
<h2><span class="header-section-number">2.10</span> Export &amp; saving</h2>
<details>
<p><summary><em>Click here to show setup code.</em></summary></p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
</details>
<p>The default way to export plots in {{ggplot2}} is by using <code>ggsave()</code>.</p>
<p>It differs slightly from other “exporting” functions in R because it comes with some smart defaults:</p>
<blockquote>
<p>ggsave() is a convenient function for saving a plot. It defaults to <strong>saving the last plot</strong> that you displayed, using the size of the current graphics device. It also <strong>guesses the type</strong> of graphics device from the extension.</p>
</blockquote>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" data-line-number="1"><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(mpg, wt)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb75-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" data-line-number="1"><span class="kw">ggsave</span>(<span class="st">&quot;mtcars.pdf&quot;</span>)</a></code></pre></div>
<pre><code>## Saving 6.5 x 4 in image</code></pre>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb78-1" data-line-number="1"><span class="kw">ggsave</span>(<span class="st">&quot;mtcars.png&quot;</span>)</a></code></pre></div>
<pre><code>## Saving 6.5 x 4 in image</code></pre>
<p>This might seem natural to you but is is not.
Let’s compare base R and {{ggplot2}}.</p>
<div id="base-r-vs.-ggplot2" class="section level3">
<h3><span class="header-section-number">2.10.1</span> Base R vs. {{ggplot2}}</h3>
<p>In base R</p>
<ul>
<li><p>one needs to open a specific graphic device first</p></li>
<li><p>then create the plot</p></li>
<li><p>and close the graphic device again.</p></li>
</ul>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" data-line-number="1"><span class="kw">png</span>(<span class="st">&quot;Plot.png&quot;</span>)</a>
<a class="sourceLine" id="cb80-2" data-line-number="2"><span class="kw">plot</span>(mpg<span class="op">$</span>displ, mpg<span class="op">$</span>hwy)</a>
<a class="sourceLine" id="cb80-3" data-line-number="3"><span class="kw">dev.off</span>()</a></code></pre></div>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" data-line-number="1"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(disply, hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb81-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb81-3" data-line-number="3"><span class="kw">ggsave</span>(<span class="st">&quot;Plot.png&quot;</span>)</a></code></pre></div>
<p>Base R plotting functions come with suboptimal defaults</p>
<ul>
<li><p>saving in pixels (differs on every monitors)</p></li>
<li><p>saving as a square image</p></li>
<li><p>no option to specify the DPI (dots per inch)</p></li>
</ul>
</div>
<div id="storing-the-plot-as-an-r-object" class="section level3">
<h3><span class="header-section-number">2.10.2</span> Storing the plot as an R object</h3>
<p>One of the major advantages of <code>ggplot()</code> is that you can save a plot as an R object and modify it later.</p>
<p>This is not possible with base R plots.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" data-line-number="1">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ, hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb82-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb82-3" data-line-number="3"></a>
<a class="sourceLine" id="cb82-4" data-line-number="4">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> class))</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/unnamed-chunk-71-1.png" width="624" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" data-line-number="1"><span class="kw">print</span>(p)</a></code></pre></div>
<p><img src="vistransrep_files/figure-html/unnamed-chunk-71-2.png" width="624" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb84-1" data-line-number="1"><span class="kw">str</span>(p)</a></code></pre></div>
<pre><code>## List of 9
##  $ data       :Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;: 234 obs. of  11 variables:
##   ..$ manufacturer: chr [1:234] &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; ...
##   ..$ model       : chr [1:234] &quot;a4&quot; &quot;a4&quot; &quot;a4&quot; &quot;a4&quot; ...
##   ..$ displ       : num [1:234] 1.8 1.8 2 2 2.8 2.8 3.1 1.8 1.8 2 ...
##   ..$ year        : int [1:234] 1999 1999 2008 2008 1999 1999 2008 1999 1999 2008 ...
##   ..$ cyl         : int [1:234] 4 4 4 4 6 6 6 4 4 4 ...
##   ..$ trans       : chr [1:234] &quot;auto(l5)&quot; &quot;manual(m5)&quot; &quot;manual(m6)&quot; &quot;auto(av)&quot; ...
##   ..$ drv         : chr [1:234] &quot;f&quot; &quot;f&quot; &quot;f&quot; &quot;f&quot; ...
##   ..$ cty         : int [1:234] 18 21 20 21 16 18 18 18 16 20 ...
##   ..$ hwy         : int [1:234] 29 29 31 30 26 26 27 26 25 28 ...
##   ..$ fl          : chr [1:234] &quot;p&quot; &quot;p&quot; &quot;p&quot; &quot;p&quot; ...
##   ..$ class       : chr [1:234] &quot;compact&quot; &quot;compact&quot; &quot;compact&quot; &quot;compact&quot; ...
##  $ layers     :List of 1
##   ..$ :Classes &#39;LayerInstance&#39;, &#39;Layer&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class LayerInstance, Layer, gg&gt;
##     aes_params: list
##     compute_aesthetics: function
##     compute_geom_1: function
##     compute_geom_2: function
##     compute_position: function
##     compute_statistic: function
##     data: waiver
##     draw_geom: function
##     finish_statistics: function
##     geom: &lt;ggproto object: Class GeomPoint, Geom, gg&gt;
##         aesthetics: function
##         default_aes: uneval
##         draw_group: function
##         draw_key: function
##         draw_layer: function
##         draw_panel: function
##         extra_params: na.rm
##         handle_na: function
##         non_missing_aes: size shape colour
##         optional_aes: 
##         parameters: function
##         required_aes: x y
##         setup_data: function
##         use_defaults: function
##         super:  &lt;ggproto object: Class Geom, gg&gt;
##     geom_params: list
##     inherit.aes: TRUE
##     layer_data: function
##     map_statistic: function
##     mapping: NULL
##     position: &lt;ggproto object: Class PositionIdentity, Position, gg&gt;
##         compute_layer: function
##         compute_panel: function
##         required_aes: 
##         setup_data: function
##         setup_params: function
##         super:  &lt;ggproto object: Class Position, gg&gt;
##     print: function
##     setup_layer: function
##     show.legend: NA
##     stat: &lt;ggproto object: Class StatIdentity, Stat, gg&gt;
##         aesthetics: function
##         compute_group: function
##         compute_layer: function
##         compute_panel: function
##         default_aes: uneval
##         extra_params: na.rm
##         finish_layer: function
##         non_missing_aes: 
##         parameters: function
##         required_aes: 
##         retransform: TRUE
##         setup_data: function
##         setup_params: function
##         super:  &lt;ggproto object: Class Stat, gg&gt;
##     stat_params: list
##     super:  &lt;ggproto object: Class Layer, gg&gt; 
##  $ scales     :Classes &#39;ScalesList&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class ScalesList, gg&gt;
##     add: function
##     clone: function
##     find: function
##     get_scales: function
##     has_scale: function
##     input: function
##     n: function
##     non_position_scales: function
##     scales: list
##     super:  &lt;ggproto object: Class ScalesList, gg&gt; 
##  $ mapping    :List of 2
##   ..$ x: language ~displ
##   .. ..- attr(*, &quot;.Environment&quot;)=&lt;environment: R_GlobalEnv&gt; 
##   ..$ y: language ~hwy
##   .. ..- attr(*, &quot;.Environment&quot;)=&lt;environment: R_GlobalEnv&gt; 
##   ..- attr(*, &quot;class&quot;)= chr &quot;uneval&quot;
##  $ theme      : list()
##  $ coordinates:Classes &#39;CoordCartesian&#39;, &#39;Coord&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class CoordCartesian, Coord, gg&gt;
##     aspect: function
##     backtransform_range: function
##     clip: on
##     default: TRUE
##     distance: function
##     expand: TRUE
##     is_free: function
##     is_linear: function
##     labels: function
##     limits: list
##     modify_scales: function
##     range: function
##     render_axis_h: function
##     render_axis_v: function
##     render_bg: function
##     render_fg: function
##     setup_data: function
##     setup_layout: function
##     setup_panel_params: function
##     setup_params: function
##     transform: function
##     super:  &lt;ggproto object: Class CoordCartesian, Coord, gg&gt; 
##  $ facet      :Classes &#39;FacetNull&#39;, &#39;Facet&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class FacetNull, Facet, gg&gt;
##     compute_layout: function
##     draw_back: function
##     draw_front: function
##     draw_labels: function
##     draw_panels: function
##     finish_data: function
##     init_scales: function
##     map_data: function
##     params: list
##     setup_data: function
##     setup_params: function
##     shrink: TRUE
##     train_scales: function
##     vars: function
##     super:  &lt;ggproto object: Class FacetNull, Facet, gg&gt; 
##  $ plot_env   :&lt;environment: R_GlobalEnv&gt; 
##  $ labels     :List of 2
##   ..$ x: chr &quot;displ&quot;
##   ..$ y: chr &quot;hwy&quot;
##  - attr(*, &quot;class&quot;)= chr [1:2] &quot;gg&quot; &quot;ggplot&quot;</code></pre>
</div>
<div id="best-practices-for-exporting" class="section level3">
<h3><span class="header-section-number">2.10.3</span> Best practices for exporting</h3>
<p>Some best practices:</p>
<ul>
<li><p>Use a reasonable high DPI. A value of “300” is ok in most cases.</p></li>
<li><p>Save in “inches” and not in “pixels”. The latter always differs on screens with different resolutions (<code>png()</code> uses pixels by default.)</p></li>
<li><p>Always specify a file name to ensure the right plot is chosen. Do not rely on the default behavior of <code>ggsave()</code> (even though it might seem convenient) which takes the last visualized plot.</p></li>
<li><p>An alternative to <code>ggsave()</code> is <code>cowplot::save_plot()</code> which comes with sensible defaults for multi-plot arrangements.</p></li>
</ul>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-and-rstudio.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="vis-adv.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["vistransrep.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
